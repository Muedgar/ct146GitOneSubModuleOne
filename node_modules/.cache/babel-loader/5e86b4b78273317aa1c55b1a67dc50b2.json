{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mutanganaedgar/Desktop/CT14/ctui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mutanganaedgar/Desktop/CT14/ctui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";//email,password,name,nationalId,phone,dob,address\nimport React from\"react\";import{Link}from\"react-router-dom\";import\"./SignUpComponent.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignUpComponent(){function handleSignUp(_x){return _handleSignUp.apply(this,arguments);}function _handleSignUp(){_handleSignUp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){var email,password,name,nationalId,phone,dob,address,arrayOne,arrayTwo,roles,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();email=document.getElementById(\"email\").value;password=document.getElementById(\"password\").value;name=document.getElementById(\"name\").value;nationalId=document.getElementById(\"nationalId\").value;phone=document.getElementById(\"phone\").value;dob=document.getElementById(\"dob\").value;address=document.getElementById(\"address\").value;// setting roles\narrayOne=email.split(\"@\");arrayTwo=arrayOne[0].split(\".\");roles=\"\";if(!arrayTwo[1]){roles=\"user\";console.log(\"empty\",roles);}if(arrayTwo[1]===\"rssb\"){roles=\"insurance\";}else if(arrayTwo[1]!==\"rssb\"){roles=\"user\";}data={email:email,password:password,name:name,nationalId:nationalId,phone:phone,dob:dob,address:address,roles:roles};_context3.next=16;return fetch(\"http://localhost:3001/signup\",{method:'POST',mode:'cors',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(data)}).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(d){var role;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:role=d.user.roles;console.log(d.jwt);if(!(role===\"insurance\")){_context2.next=6;break;}_context2.next=5;return fetch(\"http://localhost:3001/insuranceDashboard/\"+d.jwt+\"/\"+role).then(function(res){return res.json();}).then(function(d){console.log(d);}).catch(function(e){return console.log(e);});case 5:return _context2.abrupt(\"return\");case 6:if(!(role===\"user\")){_context2.next=9;break;}_context2.next=9;return fetch(\"http://localhost:3001/userDashboard/\"+d.jwt+\"/\"+role).then(function(res){return res.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(d){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!d.userDashboard){_context.next=3;break;}_context.next=3;return fetch(\"http://localhost:3001/setLoggedIn/user\").then(function(res){res.json();}).then(function(d){window.location=\"/requestChangeOfInsurance\";}).catch(function(e){return console.log(e.message);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x3){return _ref2.apply(this,arguments);};}()).catch(function(e){return console.log(e);});case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref.apply(this,arguments);};}()).catch(function(e){return console.log(e.message);});case 16:case\"end\":return _context3.stop();}}},_callee3);}));return _handleSignUp.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"heroContainer2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heroLeftContainer2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"heroLeftTitle2\",children:\"The Easiest Way To Work With Your Insurance.\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Our Health, \",/*#__PURE__*/_jsx(\"span\",{children:\"Our Future\"})]}),/*#__PURE__*/_jsx(\"button\",{children:\"Read More\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignUp,id:\"signup\",className:\"heroRightContainer2\",children:[/*#__PURE__*/_jsx(\"title\",{children:\"Login Your Account\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",className:\"form-control\",type:\"text\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",className:\"form-control\",type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",className:\"form-control\",type:\"text\",placeholder:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"nationalId\",className:\"form-control\",type:\"number\",placeholder:\"National Id\"}),/*#__PURE__*/_jsx(\"input\",{id:\"phone\",className:\"form-control\",type:\"number\",placeholder:\"Phone\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"DobDesign\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"dob\",className:\"form-control\",type:\"date\",placeholder:\"Date of Birth\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Date Of Birth\"})]}),/*#__PURE__*/_jsx(\"input\",{id:\"address\",className:\"form-control\",type:\"text\",placeholder:\"Address\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Already Have Account? \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Login Here\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"Sign Up\"})]})]});}export default SignUpComponent;","map":{"version":3,"names":["React","Link","SignUpComponent","handleSignUp","e","preventDefault","email","document","getElementById","value","password","name","nationalId","phone","dob","address","arrayOne","split","arrayTwo","roles","console","log","data","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","then","response","json","d","role","user","jwt","res","catch","userDashboard","window","location","message"],"sources":["/Users/mutanganaedgar/Desktop/CT14/ctui/src/components/signUpComponent/SignUpComponent.js"],"sourcesContent":["//email,password,name,nationalId,phone,dob,address\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./SignUpComponent.css\";\n\nfunction SignUpComponent() {\n\n    async function handleSignUp(e) {\n        e.preventDefault();\n        \n        const email = document.getElementById(\"email\").value;\n        const password = document.getElementById(\"password\").value;\n        const name = document.getElementById(\"name\").value;\n        const nationalId = document.getElementById(\"nationalId\").value;\n        const phone = document.getElementById(\"phone\").value;\n        const dob = document.getElementById(\"dob\").value;\n        const address = document.getElementById(\"address\").value;\n\n        // setting roles\n        let arrayOne = email.split(\"@\");\n        let arrayTwo = arrayOne[0].split(\".\");\n\n        let roles = \"\";\n        if(!arrayTwo[1]) {\n            roles=\"user\";\n            console.log(\"empty\",roles);\n            \n        }\n        if(arrayTwo[1] === \"rssb\") {\n            roles = \"insurance\";\n        }else if(arrayTwo[1] !== \"rssb\"){\n            roles = \"user\";\n        }\n\n        let data = {\n            email,\n            password,\n            name,\n            nationalId,\n            phone,\n            dob,\n            address,\n            roles\n        }\n\n        \n        await fetch(\"http://localhost:3001/signup\", {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify(data)\n      }).then(response=>response.json()).then(async d=> {\n        let role = d.user.roles;\n        console.log(d.jwt);\n\n        if(role === \"insurance\") {\n            \n            await fetch(\"http://localhost:3001/insuranceDashboard/\"+d.jwt+\"/\"+role)\n                .then(res=>res.json())\n                .then(d=>{\n                    console.log(d);\n                }).catch(e=>console.log(e));\n            return;\n        }\n\n        if(role === \"user\") {\n\n            await fetch(\"http://localhost:3001/userDashboard/\"+d.jwt+\"/\"+role)\n            .then(res=>res.json())\n            .then(async d=>{\n                if(d.userDashboard) {\n                    await fetch(\"http://localhost:3001/setLoggedIn/user\").then(res=>{\n                        res.json();\n                    }).then(d=> {\n                        window.location = \"/requestChangeOfInsurance\";\n                    }).catch(e=> console.log(e.message))\n                }\n            }).catch(e=>console.log(e));\n        }\n        // fetch specific user\n      }).catch(e=>console.log(e.message));\n\n\n    }\n\n    return(\n        <div className=\"heroContainer2\">\n            <div className=\"heroLeftContainer2\">\n                <h1 className=\"heroLeftTitle2\">The Easiest Way To Work With Your Insurance.</h1>\n                <label>Our Health, <span>Our Future</span></label>\n                <button>Read More</button>\n            </div>\n\n            <form onSubmit={handleSignUp} id=\"signup\" className=\"heroRightContainer2\">\n                <title>Login Your Account</title>\n                <input id=\"email\" className=\"form-control\" type=\"text\" placeholder=\"Email\" />\n                <input id=\"password\" className=\"form-control\" type=\"password\" placeholder=\"Password\" />\n                <input id=\"name\" className=\"form-control\" type=\"text\" placeholder=\"Name\" />\n                <input id=\"nationalId\" className=\"form-control\" type=\"number\" placeholder=\"National Id\" />\n                <input id=\"phone\" className=\"form-control\" type=\"number\" placeholder=\"Phone\" />\n                <div className=\"DobDesign\"><input id=\"dob\" className=\"form-control\" type=\"date\" placeholder=\"Date of Birth\"/><span>Date Of Birth</span></div>\n                <input id=\"address\" className=\"form-control\" type=\"text\" placeholder=\"Address\" />\n                <label>Already Have Account? <Link to=\"/\"><span>Login Here</span></Link></label>\n                <button className=\"btn\" type=\"submit\">Sign Up</button>\n            </form>\n        </div>\n    );\n}\n\nexport default SignUpComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module"}