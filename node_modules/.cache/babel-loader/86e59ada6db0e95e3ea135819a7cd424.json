{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mutanganaedgar/Desktop/CT14/ctui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/Users/mutanganaedgar/Desktop/CT14/ctui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/mutanganaedgar/Desktop/CT14/ctui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState,useEffect}from\"react\";import\"./Pending.css\";import\"../../commonCss/table.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=[];_context3.next=3;return fetch(\"/user/makeRequest/getAllUsers\").then(function(d){return d.json();}).then(function(d){data=d;}).catch(function(e){return console.log(e.message);});case 3:return _context3.abrupt(\"return\",data);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _getData.apply(this,arguments);}function getData2(){return _getData2.apply(this,arguments);}function _getData2(){_getData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:data=[];_context4.next=3;return fetch(\"/user/makeRequest/getAllRequests\").then(function(d){return d.json();}).then(function(d){data=d;}).catch(function(e){return console.log(e.message);});case 3:return _context4.abrupt(\"return\",data);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return _getData2.apply(this,arguments);}function Pending(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),requests=_useState4[0],setRequests=_useState4[1];useEffect(function(){getData().then(setUsers);},[]);useEffect(function(){getData2().then(setRequests);},[]);function handleApprove(_x){return _handleApprove.apply(this,arguments);}function _handleApprove(){_handleApprove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/user/makeRequest/approve/\"+id,{method:'PUT',mode:'cors',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify({data:\"no data\"})}).then(function(d){getData().then(setUsers);getData2().then(setRequests);}).catch(function(e){return console.log(e.message);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _handleApprove.apply(this,arguments);}function handleReject(_x2){return _handleReject.apply(this,arguments);}function _handleReject(){_handleReject=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/user/makeRequest/reject/\"+id,{method:'PUT',mode:'cors',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify({data:\"no data\"})}).then(function(d){getData().then(setUsers);getData2().then(setRequests);}).catch(function(e){return console.log(e.message);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _handleReject.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"pendingContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pendingTitle\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Reporting Screen: Pending Requests\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"table\",{id:\"performanceTable\",className:\"rwd-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Request Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Request Hour\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Individual Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Approve Request\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reject Request\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:requests.map(function(request){for(var i=0;i<users.length;i++){if(request.userId===users[i]._id&&request.status===\"pending\"){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{\"data-th\":\"Request Date\",children:request.scheduledate}),/*#__PURE__*/_jsx(\"td\",{\"data-th\":\"Request Hour\",children:request.hourschedule}),/*#__PURE__*/_jsx(\"td\",{\"data-th\":\"Individual Name\",children:users[i].name}),/*#__PURE__*/_jsx(\"td\",{\"data-th\":\"Approve Request\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleApprove(request._id);},type:\"submit\",className:\"btn btn-success\",children:\"Approve\"})}),/*#__PURE__*/_jsx(\"td\",{\"data-th\":\"Reject Request\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleReject(request._id);},type:\"submit\",className:\"btn btn-warning\",children:\"Reject\"})})]},request._id);}}return true;})})]})})]});}export default Pending;","map":{"version":3,"names":["React","useState","useEffect","getData","data","fetch","then","d","json","catch","e","console","log","message","getData2","Pending","users","setUsers","requests","setRequests","handleApprove","id","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","handleReject","map","request","i","length","userId","_id","status","scheduledate","hourschedule","name"],"sources":["/Users/mutanganaedgar/Desktop/CT14/ctui/src/components/agentDashboard/pendingRequests/Pending.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport \"./Pending.css\";\nimport \"../../commonCss/table.css\"\n\n\nasync function getData() {\nlet data = [];\n  await fetch(\"/user/makeRequest/getAllUsers\")\n  .then(d=>d.json())\n  .then(d=> {\n    data = d;\n  }).catch(e=>console.log(e.message));\n\n  return data;\n\n}\n\nasync function getData2() {\n  let data = [];\n  await fetch(\"/user/makeRequest/getAllRequests\")\n.then(d=>d.json())\n.then(d=> {\n  data = d;\n  \n}).catch(e=>console.log(e.message));\nreturn data;\n}\n\nfunction Pending() {\n  \n    let [users, setUsers] = useState([]);\n    let [requests,setRequests] = useState([]);\n   \n\nuseEffect(() => { \n\n\ngetData().then(setUsers);\n\n},[]);\n\nuseEffect(() => {\n  \n  getData2().then(setRequests);\n},[]);\n\n    async function handleApprove(id) {\n      ///user/makeRequest/\n      \n      await fetch(\"/user/makeRequest/approve/\"+id, {\n        method: 'PUT',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify({data: \"no data\"})\n      }).then(d=>{\n        getData().then(setUsers);\n        getData2().then(setRequests);\n      }).catch(e=>console.log(e.message));\n    }\n\n    async function handleReject(id) {\n      ///user/makeRequest/\n      \n      await fetch(\"/user/makeRequest/reject/\"+id, {\n        method: 'PUT',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify({data: \"no data\"})\n      }).then(d=>{\n        getData().then(setUsers);\n        getData2().then(setRequests);\n      }).catch(e=>console.log(e.message));\n    }\n\n    return(\n        <div className=\"pendingContainer\">\n            <div className=\"pendingTitle\">\n                <h1>Reporting Screen: Pending Requests</h1>\n            </div>\n            <div className=\"row\">\n        <table id=\"performanceTable\" className=\"rwd-table\">\n          <thead>\n          <tr>\n            <th>Request Date</th>\n            <th>Request Hour</th>\n            <th>Individual Name</th>\n            <th>Approve Request</th>\n            <th>Reject Request</th>\n          </tr>\n          </thead>\n          <tbody>\n          {\n           \n              requests.map(request => {\n                for(let i=0;i<users.length;i++) {\n                    if((request.userId === users[i]._id)&&(request.status===\"pending\")) {\n                      return (\n                        <tr key={request._id}>\n              <td data-th=\"Request Date\">{request.scheduledate}</td>\n              <td data-th=\"Request Hour\">{request.hourschedule}</td>\n              <td data-th=\"Individual Name\">{users[i].name}</td>\n              <td data-th=\"Approve Request\">\n                <button onClick={()=> handleApprove(request._id)} type=\"submit\" className=\"btn btn-success\" >Approve</button>\n              </td>\n              <td data-th=\"Reject Request\">\n                <button onClick={()=> handleReject(request._id)}  type=\"submit\" className=\"btn btn-warning\" >Reject</button>\n              </td>\n            </tr>\n                      )\n                    }\n                }\n                return true;\n})\n          }\n\n\n\n          </tbody>\n        </table>\n      </div>\n        </div>\n\n    );\n}\n\nexport default Pending;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}