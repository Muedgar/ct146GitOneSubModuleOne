{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mutanganaedgar/Desktop/CT14/ctui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/Users/mutanganaedgar/Desktop/CT14/ctui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/mutanganaedgar/Desktop/CT14/ctui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState,useEffect}from\"react\";import\"./Approved.css\";import\"../../commonCss/table.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data=[];_context2.next=3;return fetch(\"user/makeRequest/getAllUsers\").then(function(d){return d.json();}).then(function(d){data=d;}).catch(function(e){return console.log(e.message);});case 3:return _context2.abrupt(\"return\",data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _getData.apply(this,arguments);}function getData2(){return _getData2.apply(this,arguments);}function _getData2(){_getData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=[];_context3.next=3;return fetch(\"user/makeRequest/getAllRequests\").then(function(d){return d.json();}).then(function(d){data=d;}).catch(function(e){return console.log(e.message);});case 3:return _context3.abrupt(\"return\",data);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _getData2.apply(this,arguments);}function Approved(){var _useState=useState(\"Your request has been rejected, for more information reach out to customer support.\"),_useState2=_slicedToArray(_useState,2),feedBack=_useState2[0],setFeedBack=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),requests=_useState6[0],setRequests=_useState6[1];useEffect(function(){getData().then(setUsers);},[]);useEffect(function(){getData2().then(setRequests);},[]);function handleFeedback(_x,_x2){return _handleFeedback.apply(this,arguments);}function _handleFeedback(){_handleFeedback=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(requestId,userId){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data={requestId:requestId,userId:userId,feedBack:feedBack};console.log(data);_context.next=4;return fetch(\"user/makeRequest/createFeedback\",{method:'POST',mode:'cors',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify({data:data})}).then(function(d){}).catch(function(e){return console.log(e.message);});case 4:case\"end\":return _context.stop();}}},_callee);}));return _handleFeedback.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"approvedContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"approvedTitle\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Reporting Screen: Approved Requests\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"table\",{id:\"performanceTable\",className:\"rwd-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Insurance Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Request Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Individual Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Send Feedback\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:requests.map(function(request){var _loop=function _loop(i){if(request.userId===users[i]._id&&request.status===\"approved\"){return{v:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{\"data-th\":\"Request Date\",children:request.scheduledate}),/*#__PURE__*/_jsx(\"td\",{\"data-th\":\"Request Hour\",children:request.hourschedule}),/*#__PURE__*/_jsx(\"td\",{\"data-th\":\"Individual Name\",children:users[i].name}),/*#__PURE__*/_jsxs(\"td\",{\"data-th\":\"Send Feedback\",children:[/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(val){return setFeedBack(val.target.value);},className:\"form-control textAreaCss\",cols:\"14\",rows:\"5\",value:feedBack}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleFeedback(request._id,users[i]._id);},id:\"deleteDvo02\",type:\"submit\",className:\"btn btn-success\",children:\"Send Feedback\"})]})]},request._id)};}};for(var i=0;i<users.length;i++){var _ret=_loop(i);if(typeof _ret===\"object\")return _ret.v;}return true;})})]})})]});}export default Approved;","map":{"version":3,"names":["React","useState","useEffect","getData","data","fetch","then","d","json","catch","e","console","log","message","getData2","Approved","feedBack","setFeedBack","users","setUsers","requests","setRequests","handleFeedback","requestId","userId","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","map","request","i","_id","status","scheduledate","hourschedule","name","val","target","value","length"],"sources":["/Users/mutanganaedgar/Desktop/CT14/ctui/src/components/agentDashboard/approvedRequests/Approved.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\n\nimport \"./Approved.css\";\nimport \"../../commonCss/table.css\"\n\n\n\nasync function getData() {\n  let data = [];\n    await fetch(\"user/makeRequest/getAllUsers\")\n    .then(d=>d.json())\n    .then(d=> {\n      data = d;\n    }).catch(e=>console.log(e.message));\n  \n    return data;\n  \n  }\n  \n  async function getData2() {\n    let data = [];\n    await fetch(\"user/makeRequest/getAllRequests\")\n  .then(d=>d.json())\n  .then(d=> {\n    data = d;\n    \n  }).catch(e=>console.log(e.message));\n  return data;\n  }\n  \n\n\n\n\nfunction Approved() {\n\n  let [feedBack, setFeedBack] = useState(\"Your request has been rejected, for more information reach out to customer support.\");\n\n    let [users, setUsers] = useState([]);\n  let [requests,setRequests] = useState([]);\n\n  useEffect(() => { \n\n\n    getData().then(setUsers);\n    \n    },[]);\n    \n    useEffect(() => {\n      \n      getData2().then(setRequests);\n    },[]);\n\n\n    async function handleFeedback(requestId, userId) {\n      let data = {requestId, userId, feedBack};\n      console.log(data);\n      await fetch(\"user/makeRequest/createFeedback\", {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify({data})\n      }).then(d=>{}).catch(e=>console.log(e.message))\n    }\n\n    return(\n        <div className=\"approvedContainer\">\n        <div className=\"approvedTitle\">\n            <h1>Reporting Screen: Approved Requests</h1>\n        </div>\n        <div className=\"row\">\n    <table id=\"performanceTable\" className=\"rwd-table\">\n      <thead>\n      <tr>\n        <th>Insurance Id</th>\n        <th>Request Date</th>\n        <th>Individual Name</th>\n        <th>Send Feedback</th>\n      </tr>\n      </thead>\n      <tbody>\n      {\n            requests.map(request => {\n              for(let i=0;i<users.length;i++) {\n                  if((request.userId===users[i]._id)&&(request.status===\"approved\")) {\n                   return(\n<tr key={request._id}>\n              <td data-th=\"Request Date\">{request.scheduledate}</td>\n              <td data-th=\"Request Hour\">{request.hourschedule}</td>\n              <td data-th=\"Individual Name\">{users[i].name}</td>\n              <td data-th=\"Send Feedback\">\n                        <textarea onChange={val => setFeedBack(val.target.value)} className=\"form-control textAreaCss\" cols=\"14\" rows=\"5\" value={feedBack}/>\n                        <button onClick={() => handleFeedback(request._id, users[i]._id)} id=\"deleteDvo02\" type=\"submit\" className=\"btn btn-success\" >Send Feedback</button>\n                    </td>\n                  </tr>\n\n                   )\n                  }\n              }\n              return true;\n            })\n          }\n\n          \n      </tbody>\n    </table>\n  </div>\n    </div>\n\n\n    );\n}\n\nexport default Approved;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}