{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mutanganaedgar/Desktop/CT14/ctui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mutanganaedgar/Desktop/CT14/ctui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{Link}from\"react-router-dom\";import\"./HeroComponent.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function HeroComponent(){function handleLogin(_x){return _handleLogin.apply(this,arguments);}function _handleLogin(){_handleLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var email,password,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();email=document.getElementById(\"emailLogin\").value;password=document.getElementById(\"passwordLogin\").value;data={email:email,password:password};_context2.next=6;return fetch(\"login\",{method:'POST',mode:'cors',cache:'no-cache',credentials:'same-origin',headers:{'Content-Type':'application/json'},redirect:'follow',referrerPolicy:'no-referrer',body:JSON.stringify(data)}).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(d){var role;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:role=d.user.roles;console.log(d.jwt);if(!(role===\"insurance\")){_context.next=6;break;}// await fetch(\"\")\n//     .then(res=>res.json())\n//     .then(d=>{\n//         console.log(d);\n//     }).catch(e=>console.log(e));\n// store data to session\nsessionStorage.setItem('currentlyLoggedin',JSON.stringify(d.user));window.location=\"agent/pending\";return _context.abrupt(\"return\");case 6:if(role===\"user\"){// await fetch()\n// .then(res=>res.json())\n// .then(async d=>{\n//     if(d.userDashboard) {\n//         await fetch(\"setLoggedIn/user\").then(res=>{\n//             res.json();\n//         }).then(d=> {\n//             window.location = \"/requestChangeOfInsurance\";\n//         }).catch(e=> console.log(e.message))\n//     }\n// }).catch(e=>console.log(e));\nsessionStorage.setItem('currentlyLoggedin',JSON.stringify(d.user));window.location=\"user/sending\";}// fetch specific user\ncase 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref.apply(this,arguments);};}()).catch(function(e){return console.log(e.message);});case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _handleLogin.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"heroContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heroLeftContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"heroLeftTitle\",children:\"The Easiest Way To Work With Your Insurance.\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Our Health, \",/*#__PURE__*/_jsx(\"span\",{children:\"Our Future\"})]}),/*#__PURE__*/_jsx(\"button\",{children:\"Read More\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"heroRightContainer\",children:[/*#__PURE__*/_jsx(\"title\",{children:\"Login Your Account\"}),/*#__PURE__*/_jsx(\"input\",{id:\"emailLogin\",className:\"form-control\",type:\"text\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"passwordLogin\",className:\"form-control\",type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Register Here\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"Login\"})]})]});}export default HeroComponent;","map":{"version":3,"names":["React","Link","HeroComponent","handleLogin","e","preventDefault","email","document","getElementById","value","password","data","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","then","response","json","d","role","user","roles","console","log","jwt","sessionStorage","setItem","window","location","catch","message"],"sources":["/Users/mutanganaedgar/Desktop/CT14/ctui/src/components/heroComponent/HeroComponent.js"],"sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./HeroComponent.css\";\n\nfunction HeroComponent() {\n\n    async function handleLogin(e) {\n        e.preventDefault();\n\n        const email = document.getElementById(\"emailLogin\").value;\n        const password = document.getElementById(\"passwordLogin\").value;\n        const data = {email,password};\n        await fetch(\"login\", {\n            method: 'POST',\n            mode: 'cors',\n            cache: 'no-cache',\n            credentials: 'same-origin',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            redirect: 'follow',\n            referrerPolicy: 'no-referrer',\n            body: JSON.stringify(data)\n          }).then(response=>response.json()).then(async d=> {\n            let role = d.user.roles;\n            console.log(d.jwt);\n    \n            if(role === \"insurance\") {\n                \n                // await fetch(\"\")\n                //     .then(res=>res.json())\n                //     .then(d=>{\n                //         console.log(d);\n                //     }).catch(e=>console.log(e));\n                // store data to session\n                sessionStorage.setItem('currentlyLoggedin', JSON.stringify(d.user));\n    \n                window.location = \"agent/pending\";\n                return;\n            }\n    \n            if(role === \"user\") {\n    \n                // await fetch()\n                // .then(res=>res.json())\n                // .then(async d=>{\n                //     if(d.userDashboard) {\n                //         await fetch(\"setLoggedIn/user\").then(res=>{\n                //             res.json();\n                //         }).then(d=> {\n                //             window.location = \"/requestChangeOfInsurance\";\n                //         }).catch(e=> console.log(e.message))\n                //     }\n                // }).catch(e=>console.log(e));\n                sessionStorage.setItem('currentlyLoggedin', JSON.stringify(d.user));\n    \n                window.location = \"user/sending\";\n            }\n            // fetch specific user\n          }).catch(e=>console.log(e.message));\n\n\n    }\n    return(\n        <div className=\"heroContainer\">\n            <div className=\"heroLeftContainer\">\n                <h1 className=\"heroLeftTitle\">The Easiest Way To Work With Your Insurance.</h1>\n                <label>Our Health, <span>Our Future</span></label>\n                <button>Read More</button>\n            </div>\n\n            <form onSubmit={handleLogin} className=\"heroRightContainer\">\n                <title>Login Your Account</title>\n                <input id=\"emailLogin\" className=\"form-control\" type=\"text\" placeholder=\"Email\" />\n                <input id=\"passwordLogin\" className=\"form-control\" type=\"password\" placeholder=\"Password\" />\n                {/* <input className=\"form-control\" type=\"date\" placeholder=\"Date of Birth\" /> */}\n                <label>Don't have an account? <Link to=\"/signup\"><span>Register Here</span></Link></label>\n                <button className=\"btn\" type=\"submit\">Login</button>\n            </form>\n        </div>\n    );\n}\n\nexport default HeroComponent;"],"mappings":"0QAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAO,qBAAP,C,wFAEA,QAASC,cAAT,EAAyB,SAENC,YAFM,+IAErB,kBAA2BC,CAA3B,gJACIA,CAAC,CAACC,cAAF,GAEMC,KAHV,CAGkBC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAHxD,CAIUC,QAJV,CAIqBH,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,KAJ9D,CAKUE,IALV,CAKiB,CAACL,KAAK,CAALA,KAAD,CAAOI,QAAQ,CAARA,QAAP,CALjB,wBAMUE,MAAK,CAAC,OAAD,CAAU,CACjBC,MAAM,CAAE,MADS,CAEjBC,IAAI,CAAE,MAFW,CAGjBC,KAAK,CAAE,UAHU,CAIjBC,WAAW,CAAE,aAJI,CAKjBC,OAAO,CAAE,CACP,eAAgB,kBADT,CALQ,CAQjBC,QAAQ,CAAE,QARO,CASjBC,cAAc,CAAE,aATC,CAUjBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeX,IAAf,CAVW,CAAV,CAAL,CAWDY,IAXC,CAWI,SAAAC,QAAQ,QAAEA,SAAQ,CAACC,IAAT,EAAF,EAXZ,EAW+BF,IAX/B,4FAWoC,iBAAMG,CAAN,6HAClCC,IADkC,CAC3BD,CAAC,CAACE,IAAF,CAAOC,KADoB,CAEtCC,OAAO,CAACC,GAAR,CAAYL,CAAC,CAACM,GAAd,EAFsC,KAInCL,IAAI,GAAK,WAJ0B,0BAMlC;AACA;AACA;AACA;AACA;AACA;AACAM,cAAc,CAACC,OAAf,CAAuB,mBAAvB,CAA4Cb,IAAI,CAACC,SAAL,CAAeI,CAAC,CAACE,IAAjB,CAA5C,EAEAO,MAAM,CAACC,QAAP,CAAkB,eAAlB,CAdkC,wCAkBtC,GAAGT,IAAI,GAAK,MAAZ,CAAoB,CAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAM,cAAc,CAACC,OAAf,CAAuB,mBAAvB,CAA4Cb,IAAI,CAACC,SAAL,CAAeI,CAAC,CAACE,IAAjB,CAA5C,EAEAO,MAAM,CAACC,QAAP,CAAkB,cAAlB,CACH,CACD;AAnCsC,sDAXpC,iEA+CDC,KA/CC,CA+CK,SAAAjC,CAAC,QAAE0B,QAAO,CAACC,GAAR,CAAY3B,CAAC,CAACkC,OAAd,CAAF,EA/CN,CANV,yDAFqB,8CA2DrB,mBACI,aAAK,SAAS,CAAC,eAAf,wBACI,aAAK,SAAS,CAAC,mBAAf,wBACI,WAAI,SAAS,CAAC,eAAd,0DADJ,cAEI,qDAAmB,oCAAnB,GAFJ,cAGI,qCAHJ,GADJ,cAOI,cAAM,QAAQ,CAAEnC,WAAhB,CAA6B,SAAS,CAAC,oBAAvC,wBACI,6CADJ,cAEI,cAAO,EAAE,CAAC,YAAV,CAAuB,SAAS,CAAC,cAAjC,CAAgD,IAAI,CAAC,MAArD,CAA4D,WAAW,CAAC,OAAxE,EAFJ,cAGI,cAAO,EAAE,CAAC,eAAV,CAA0B,SAAS,CAAC,cAApC,CAAmD,IAAI,CAAC,UAAxD,CAAmE,WAAW,CAAC,UAA/E,EAHJ,cAKI,gEAA8B,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,uBAAmB,uCAAnB,EAA9B,GALJ,cAMI,eAAQ,SAAS,CAAC,KAAlB,CAAwB,IAAI,CAAC,QAA7B,mBANJ,GAPJ,GADJ,CAkBH,CAED,cAAeD,cAAf"},"metadata":{},"sourceType":"module"}